{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport PORT from \"../../env.js\";\nvar urlAPI = \"http://localhost:\" + PORT;\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nvar getAccessToken = function () {\n  var _ref = _asyncToGenerator(function* () {\n    try {\n      var value = yield AsyncStorage.getItem('accessToken');\n\n      if (value !== null) {\n        return value;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  });\n\n  return function getAccessToken() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getId = function () {\n  var _ref2 = _asyncToGenerator(function* () {\n    try {\n      var value = yield AsyncStorage.getItem('userId');\n\n      if (value !== null) {\n        return value;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  });\n\n  return function getId() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport var sendInvite = function () {\n  var _ref3 = _asyncToGenerator(function* (userFriendsList) {\n    var userId = yield getId();\n    var token = yield getAccessToken();\n    var isAuth = yield onLoggedIn(token);\n    var res = yield fetch(urlAPI + \"/sendInvite\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify({\n        userSender: userId,\n        friendsList: userFriendsList\n      })\n    });\n\n    if (res.ok) {\n      if (isAuth) {\n        return yield res.json();\n      }\n    }\n  });\n\n  return function sendInvite(_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var acceptRequestFriends = function () {\n  var _ref4 = _asyncToGenerator(function* (id) {\n    var userId = yield getId();\n    var token = yield getAccessToken();\n    var isAuth = yield onLoggedIn(token);\n    console.log(id);\n    var res = yield fetch(urlAPI + \"/acceptFriendsRequest\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify({\n        userSender: id,\n        userReceiver: userId\n      })\n    });\n\n    if (res.ok) {\n      if (isAuth) {\n        return yield res.json();\n      }\n    }\n  });\n\n  return function acceptRequestFriends(_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var getNotifications = function () {\n  var _ref5 = _asyncToGenerator(function* () {\n    var userId = yield getId();\n    var response = yield fetch(urlAPI + \"/getFriendsRequest\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify({\n        id: userId\n      })\n    });\n\n    if (response.ok) {\n      return yield response.json();\n    } else {\n      console.log(response);\n      return 0;\n    }\n\n    return 0;\n  });\n\n  return function getNotifications() {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var getFriends = function () {\n  var _ref6 = _asyncToGenerator(function* () {\n    var userId = yield getId();\n    var response = yield fetch(urlAPI + \"/getFriends\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify({\n        id: userId\n      })\n    });\n\n    if (response.ok) {\n      return yield response.json();\n    } else {\n      console.log(response);\n      return 0;\n    }\n  });\n\n  return function getFriends() {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var sendRequest = function () {\n  var _ref7 = _asyncToGenerator(function* (userReceiverID) {\n    var userSenderID = yield getId();\n    var token = yield getAccessToken();\n    var isAuth = yield onLoggedIn(token);\n    var res = yield fetch(urlAPI + \"/sendRequest\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify({\n        userSender: userSenderID,\n        userReceiver: userReceiverID\n      })\n    });\n\n    if (res.ok) {\n      if (isAuth) {\n        return yield res.json();\n      }\n    }\n  });\n\n  return function sendRequest(_x3) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nexport var findFriends = function () {\n  var _ref8 = _asyncToGenerator(function* (emailUser) {\n    var token = yield getAccessToken();\n    var isAuth = yield onLoggedIn(token);\n    var res = yield fetch(urlAPI + \"/findFriend\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify({\n        email: emailUser\n      })\n    });\n\n    if (res.ok) {\n      if (isAuth) {\n        return yield res.json();\n      }\n    }\n  });\n\n  return function findFriends(_x4) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nexport var onLoggedIn = function () {\n  var _ref9 = _asyncToGenerator(function* (token) {\n    var response = yield fetch(urlAPI + \"/private\", {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n        'Authorization': \"Bearer \" + token\n      }\n    });\n\n    if (response.ok) {\n      try {\n        var jsonRes = yield response.json();\n        console.log(jsonRes);\n        return jsonRes.checkAuth;\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  });\n\n  return function onLoggedIn(_x5) {\n    return _ref9.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["PORT","urlAPI","AsyncStorage","getAccessToken","value","getItem","e","console","log","getId","sendInvite","userFriendsList","userId","token","isAuth","onLoggedIn","res","fetch","method","headers","body","JSON","stringify","userSender","friendsList","ok","json","acceptRequestFriends","id","userReceiver","getNotifications","response","getFriends","sendRequest","userReceiverID","userSenderID","findFriends","emailUser","email","jsonRes","checkAuth","err"],"sources":["/Users/apple/Documents/Programming/barBandNew/mobile/core/api/API.js"],"sourcesContent":["import PORT from '../../env.js'\r\nconst urlAPI = `http://localhost:${PORT}`\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nconst getAccessToken = async () => {\r\n   try {\r\n      const value = await AsyncStorage.getItem('accessToken');\r\n      if(value !== null) {\r\n         return value;\r\n      }\r\n   } catch(e) {\r\n      console.log(e);\r\n   }\r\n}\r\n\r\nconst getId = async () => {\r\n   try {\r\n      const value = await AsyncStorage.getItem('userId');\r\n      if(value !== null) {\r\n         return value;\r\n      }\r\n   } catch(e) {\r\n      console.log(e);\r\n   }\r\n}\r\n\r\nexport const sendInvite = async (userFriendsList) => {\r\n   const userId = await getId();\r\n   const token = await getAccessToken();\r\n   const isAuth = await onLoggedIn(token);\r\n   let res = await fetch(`${urlAPI}/sendInvite`, {\r\n      method: 'POST',\r\n      headers: {\r\n         'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify({userSender: userId, friendsList: userFriendsList})\r\n   })\r\n   if (res.ok) {\r\n      if(isAuth) {\r\n         return await res.json();\r\n      }\r\n   }\r\n}\r\n\r\nexport const acceptRequestFriends = async (id) => {\r\n   const userId = await getId();\r\n   const token = await getAccessToken();\r\n   const isAuth = await onLoggedIn(token);\r\n   console.log(id);\r\n   let res = await fetch(`${urlAPI}/acceptFriendsRequest`, {\r\n      method: 'POST',\r\n      headers: {\r\n         'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify({userSender: id, userReceiver: userId})\r\n   })\r\n   if (res.ok) {\r\n      if(isAuth) {\r\n         return await res.json();\r\n      }\r\n   }\r\n}\r\n\r\nexport const getNotifications = async () => {\r\n   const userId = await getId();\r\n   let response = await fetch(`${urlAPI}/getFriendsRequest`, {\r\n      method: 'POST',\r\n      headers: {\r\n         'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify({id: userId})\r\n   });\r\n   if (response.ok) {\r\n      return await response.json();\r\n   } else {\r\n      console.log(response);\r\n      return 0;\r\n   }\r\n   return 0;\r\n}\r\n\r\nexport const getFriends = async () => {\r\n   const userId = await getId();\r\n   let response = await fetch(`${urlAPI}/getFriends`, {\r\n      method: 'POST',\r\n      headers: {\r\n         'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify({id: userId})\r\n   });\r\n   if (response.ok) {\r\n      return await response.json();\r\n   } else {\r\n      console.log(response);\r\n      return 0;\r\n   }\r\n}\r\n\r\nexport const sendRequest = async (userReceiverID) => {\r\n   const userSenderID = await getId();\r\n   const token = await getAccessToken();\r\n   const isAuth = await onLoggedIn(token);\r\n   let res = await fetch(`${urlAPI}/sendRequest`, {\r\n      method: 'POST',\r\n      headers: {\r\n         'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify({userSender: userSenderID, userReceiver: userReceiverID})\r\n   })\r\n   if (res.ok) {\r\n      if(isAuth) {\r\n         return await res.json();\r\n      }\r\n   }\r\n}\r\n\r\nexport const findFriends = async (emailUser) => {\r\n   const token = await getAccessToken();\r\n   const isAuth = await onLoggedIn(token);\r\n   let res = await fetch(`${urlAPI}/findFriend`, {\r\n      method: 'POST',\r\n      headers: {\r\n         'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify({email: emailUser})\r\n   })\r\n   if (res.ok) {\r\n      if(isAuth){\r\n         return await res.json();\r\n      }\r\n   }\r\n}\r\n\r\nexport const onLoggedIn = async (token) => {\r\n   let response = await fetch(`${urlAPI}/private`, {\r\n      method: 'GET',\r\n      headers: {\r\n         'Content-Type': 'application/json;charset=utf-8',\r\n         'Authorization': `Bearer ${token}`,\r\n      },\r\n   })\r\n   if (response.ok) {\r\n      try {\r\n         const jsonRes = await response.json();\r\n         console.log(jsonRes);\r\n         return jsonRes.checkAuth;\r\n      } catch (err) {\r\n         console.log(err);\r\n      }\r\n   }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}